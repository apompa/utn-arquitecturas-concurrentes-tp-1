<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <link rel="stylesheet" href="main.css">
  </head>
  <body>
    <ul id="messages"></ul>
    <form action="">
      <input id="m" autocomplete="off" />
      <button>Send</button>
    </form>
    <script src="socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      (function(){
        var socket = io("127.0.0.1:3000");
        var counter = 1;
        
         var onMessage = function(msg){
             $('#messages').append($('<li>').text(msg));
          };  

          $('#m').on("keypress",function(){
            socket.emit('typing client');
          });
          socket.on('student question', function(msg) {
            onMessage(msg);
            if (counter%5===0){
              socket.emit('teacher answer', "answer");
             }
             counter++;
           });
          socket.on('teacher answer', onMessage);
          socket.on('typing server', onMessage);
        })();
    </script>
  </body>
</html>